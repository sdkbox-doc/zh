<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>App Rating & Review with C++ - SDKBOX</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/custom.css" rel="stylesheet">


        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-70044300-2', 'auto');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="http://sdkbox.com"><img src="http://www.cocos2d-x.org/s/sdkbox/SDKBOX_logo.png"></a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">Overview</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cocos <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../cocos/">Cocos Integration</a>
</li>

                        
                            
<li >
    <a href="../../../installer/">Installer</a>
</li>

                        
                            
  
  <li class="dropdown-submenu">
    <a tabindex="-1" class="non-link">Plugins</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../achievement/">Achievements</a>
</li>

        
            
  

        
            
<li >
    <a href="../../adcolony/">AdColony</a>
</li>

        
            
  

        
            
<li >
    <a href="../../admob/">AdMob</a>
</li>

        
            
  

        
            
<li >
    <a href="../../agecheq/">AgeCheq</a>
</li>

        
            
  

        
            
<li >
    <a href="../../appnext/">Appnext</a>
</li>

        
            
  

        
            
<li >
    <a href="../../appodeal/">Appodeal</a>
</li>

        
            
  

        
            
<li >
    <a href="../../amazon/">Amazon</a>
</li>

        
            
  

        
            
<li >
    <a href="../../apteligent/">Apteligent</a>
</li>

        
            
  

        
            
<li >
    <a href="../../bee7/">Bee7</a>
</li>

        
            
  

        
            
<li >
    <a href="../../chartboost/">Chartboost</a>
</li>

        
            
  

        
            
<li >
    <a href="../../facebook/">Facebook</a>
</li>

        
            
  

        
            
<li >
    <a href="../../flurryanalytics/">Flurry Analytics</a>
</li>

        
            
  

        
            
<li >
    <a href="../../fyber/">Fyber</a>
</li>

        
            
  

        
            
<li >
    <a href="../../googleanalytics/">Google Analytics</a>
</li>

        
            
  

        
            
<li >
    <a href="../../iap/">In-App Purchase</a>
</li>

        
            
  

        
            
<li >
    <a href="../../inmobi/">InMobi</a>
</li>

        
            
  

        
            
<li >
    <a href="../../kochava/">Kochava</a>
</li>

        
            
  

        
            
<li >
    <a href="../../leadbolt/">LeadBolt</a>
</li>

        
            
  

        
            
<li >
    <a href="../../leaderboard/">Leaderboard</a>
</li>

        
            
  

        
            
<li >
    <a href="../../playphone/">Playphone</a>
</li>

        
            
  

        
            
<li >
    <a href="../">Ratings & Reviews</a>
</li>

        
            
  

        
            
<li >
    <a href="../../sdkboxads/">SDKBOX Ads</a>
</li>

        
            
  

        
            
<li >
    <a href="../../sdkboxplay/">SDKBOX Play</a>
</li>

        
            
  

        
            
<li >
    <a href="../../share/">Social Sharing</a>
</li>

        
            
  

        
            
<li >
    <a href="../../tune/">Tune</a>
</li>

        
            
  

        
            
<li >
    <a href="../../valuepotion/">Valuepotion</a>
</li>

        
            
  

        
            
<li >
    <a href="../../vungle/">Vungle</a>
</li>

        
            
  

        
            
<li >
    <a href="../../youtube/">Youtube</a>
</li>

        
            
  

        
    </ul>
  </li>
  

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unity <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../unity/iap/">In-App Purchase</a>
</li>

                        
                            
<li >
    <a href="../../../unity/review/">Ratings & Reviews</a>
</li>

                        
                            
<li >
    <a href="../../../unity/socialshare/">SocialShare</a>
</li>

                        
                            
<li >
    <a href="../../../unity/googleanalytics/documentation/">Google Analytics</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unreal <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../unreal/iap/">In-App Purchase</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">LiveOps <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../liveops/">Setup</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/remote-config/">Remote Configuration</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/receipt-verification/">Server-side IAP receipt verification</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/catalog-management/">On-the-fly catalog management</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Q&A <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../qa/installgoogleplaystore/">InstallGooglePlay</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../../release-note/">About</a>
                    </li>
                
                

                    <!-- new add for language button -->
                    <li>
                        <a href="http://sdkbox-doc.github.io/en/">English</a>
                    </li>
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li >
                        <a rel="next" href="../v3-lua/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../v2-js/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#_1">集成</a></li>
        
    
        <li class="main "><a href="#china">从 China 服务器下载</a></li>
        
    
        <li class="main "><a href="#_2">重点注意事项</a></li>
        
            <li><a href="#_3">禁用应用程序安全传输策略</a></li>
        
            <li><a href="#bitcode">禁止 Bitcode 支持</a></li>
        
            <li><a href="#_4">游戏全屏配置</a></li>
        
            <li><a href="#canopenurl">canOpenURL 白名单</a></li>
        
            <li><a href="#json">JSON 配置</a></li>
        
    
        <li class="main "><a href="#_5">使用</a></li>
        
            <li><a href="#review">初始化 Review</a></li>
        
            <li><a href="#review_1">设置 Review (可选)</a></li>
        
            <li><a href="#review_2">接收 Review 事件 (可选)</a></li>
        
    
        <li class="main "><a href="#api-reference">API Reference</a></li>
        
            <li><a href="#methods">Methods</a></li>
        
            <li><a href="#listeners">Listeners</a></li>
        
    
        <li class="main "><a href="#_6">手动集成</a></li>
        
    
        <li class="main "><a href="#ios">iOS 手动集成步骤</a></li>
        
    
        <li class="main "><a href="#android">Android 手动集成步骤.</a></li>
        
            <li><a href="#_7">拷贝文件</a></li>
        
            <li><a href="#androidmanifestxml">编辑 AndroidManifest.xml</a></li>
        
            <li><a href="#androidmk">编辑 Android.mk</a></li>
        
            <li><a href="#aplicationmk">编辑 Aplication.mk</a></li>
        
            <li><a href="#yourgamenamejava">修改 &lt;YourGameName&gt;.java</a></li>
        
            <li><a href="#release">混淆 (release 模式有效, 可选)</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><a href="../">&#8249; Review Doc Home</a></p>
<h1>Review 集成指南</h1>

<h4><em><b>For the C++ version of cocos2d-x v2.x</b> - (<a href="./../">all other versions</a>)</em></h4>

<h2 id="_1">集成</h2>
<p>在您确保正确安装了 SDKBOX installer 的情况下，运行下面的命令来集成 SDKBOX Review 插件。</p>
<pre><code class="bash">$ sdkbox import review
</code></pre>

<h2 id="china">从 China 服务器下载</h2>
<p>如果你在中国, 并且下载插件的速度比较慢, 可以尝试使用位于中国的服务器来下载, 查询插件, 使用方法为在你的 <code>sdkbox import</code> 后加 <code>--server china</code> 及可, 比如:</p>
<pre><code class="bash">sdkbox import xxx  --server china
</code></pre>

<p>xxx 为你的插件名字</p>
<h2 id="_2">重点注意事项</h2>
<p>如果您升级到了 Xcode7, 则需要以下额外步骤来确保插件工作正常:</p>
<h4 id="_3">禁用应用程序安全传输策略</h4>
<p>添加以下项到 plist:</p>
<pre><code>&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;
    &lt;true/&gt;
&lt;/dict&gt;
</code></pre>

<p>添加后的文件内容看起来就像这样：</p>
<p><img alt="" src="../../../imgs/ATS.png" /></p>
<h4 id="bitcode">禁止 Bitcode 支持</h4>
<p>您必须禁止 <strong>Bitcode</strong> 的支持，否则将会编译失败。</p>
<h4 id="_4">游戏全屏配置</h4>
<p>如果您的游戏不同时支持横竖屏，则必须在 Xcode 中选中 <code>Requires full screen</code>，否则将不会通过 Apple 的审核。</p>
<h4 id="canopenurl">canOpenURL 白名单</h4>
<p>取决于您使用哪些插件。需要在 <code>info.plist</code> 的 <code>LSApplicationQueriesSchemes</code> 下添加名单。</p>
<!--## Configuration
### SDKBOX Cloud
SDKBOX Cloud enables developers to receive the benefits of a centralized application management interface, by helping to boost their applications with extended functionality. The two main features are: __Remote Application Management__ which provides the abilities of updating and testing, and __IAP Receipt Verification__.

Developers must register at Chukong’s website to get __developers credentials__. After receiving __developers credentials__, developers can register an unlimited number of __applications__. Each __application__ will have an associated __application token__ and a __application secret__. These are used to securely transmit new plugin configurations to the clients as well as grant access to all the remotely accessible services.

### Remote Application Configuration
SDKBOX allows developers to create a __Remote Application Configuration__ for each application they are developing.

Registering the applications’ allows for on-the-fly update of its plugin’s configuration. For example, it will allow the change of the Google Analytics tracking code, switch to a new AdColony campaign or add new in-app purchase products without rebuilding and redeploying your apps to the app stores.

To enable this cloud service in your applications is as easy as calling a single __init()__ function and passing in your __application token__ and __application secret__ that were provided when you created the app in the previous section.

wzxhzdk:3

  __Note__: each application will have it’s own __application token__ and each configuration for each game will have it’s own __application secret__. The __application secret__ is the actual encryption key used to decipher the remote configuration.

When the developer updates a __Remote Application Configuration__ the application will automatically pull the new configuration and put it into effect. This means that you can update configuration information on the fly and everyone playing your game will get updated the next time the user starts the application!

To ensure security, during normal execution the new configuration is locally saved in the applications’s private folder, and the next time it restarts it is applied. Also, configurations are cyphered and its contents are not exposed, even if your application runs on a rooted/jailbroken device.
-->

<h3 id="json">JSON 配置</h3>
<p>SDKBOX 安装器会为您自动生成一个配置文件 <code>res/sdkbox_config.json</code>,在您使用前,请修改里面的值为您自己的应用所需的值.</p>
<p>下面给一个 Review 的配置.</p>
<pre><code class="json">&quot;Review&quot;:{
    &quot;ios&quot;: {
        &quot;Review&quot;:{
            &quot;AppID&quot;:&quot;587767923&quot;,            //appid, ios 上有效
            &quot;DayLimit&quot;: 0,                  //在评价弹出框显示前的天数限制
            &quot;LaunchLimit&quot;: 3,               //在评价弹出框显示前的启动次数限制
            &quot;UserEventLimit&quot;: 0,            //在评价弹出框显示前的用户事件限制, 用户事件是集成应用来增加事件记数的,调用 userDidSignificantEvent 增加用户事件记数
            &quot;DayForReminding&quot;: 1,           //用户选择 稍后提示 后再次弹出的天数限制
            &quot;LaunchForReminding&quot;: 2,        //用户选择 稍后提示 后再次弹出的启动次数限制
            &quot;tryPromptWhenInit&quot;: true       //在初始化后，是否自动弹出评价提示框
        }
    },
    &quot;android&quot;: {
        &quot;Review&quot;:{
            &quot;DayLimit&quot;: 0,
            &quot;LaunchLimit&quot;: 3,
            &quot;UserEventLimit&quot;: 0,
            &quot;DayForReminding&quot;: 1,
            &quot;LaunchForReminding&quot;: 2,
            &quot;tryPromptWhenInit&quot;: true
        }
    }
}
</code></pre>

<h2 id="_5">使用</h2>
<h3 id="review">初始化 Review</h3>
<p>在您的代码的合适的位置初始化这个插件，我们建议您在 <code>AppDelegate:applicationDidFinishLaunching()</code> 或者 <code>AppController:didFinishLaunchingWithOptions()</code> 中进行初始化。并确保您的代码中包含了正确的头文件。举例如下:</p>
<pre><code class="cpp">#include &quot;PluginReview/PluginReview.h&quot;
AppDelegate::applicationDidFinishLaunching()
{
     sdkbox::PluginReview::init();
}
</code></pre>

<h3 id="review_1">设置 Review (可选)</h3>
<p>如果您不要使用默认的提示字串,您可以设置自己的字串</p>
<p><code>注意:</code> 如果您在 <code>sdkbox.config</code> 中把 <code>tryPromptWhenInit</code> 项设置为真,那必须在 <code>init()</code> 之前调用以下函数</p>
<pre><code class="cpp">sdkbox::PluginReview::setCustomPromptTitle(&quot;custom title&quot;);
sdkbox::PluginReview::setCustomPromptMessage(&quot;custom message&quot;);
sdkbox::PluginReview::setCustomPromptCancelButtonTitle(&quot;custom cancel&quot;);
sdkbox::PluginReview::setCustomPromptRateButtonTitle(&quot;custom rate&quot;);
sdkbox::PluginReview::setCustomPromptRateLaterButtonTitle(&quot;custom rate later&quot;);
</code></pre>

<p>如果您的 <code>sdkbox.config</code> 中把 <code>tryPromptWhenInit</code> 项为 false, 那您可以调用 <code>tryToShowPrompt</code> 尝试提示用户评价您的应用,
如果所有的限制条件都满足,那提示框就会显示</p>
<pre><code class="cpp">sdkbox::PluginReview::tryToShowPrompt();
</code></pre>

<p>您也可以强制显示评价提示框</p>
<pre><code class="cpp">sdkbox::PluginReview::forceToShowPrompt();
</code></pre>

<p>如果您的 <code>sdkbox.config</code> 中的 <code>UserEventLimit</code> 项大于0的话，那您需要自已增加用户事件记数</p>
<pre><code class="cpp">sdkbox::PluginReview::userDidSignificantEvent(true);
</code></pre>

<h3 id="review_2">接收 Review 事件 (可选)</h3>
<p>您可以接收 <code>Review</code> 事件,以便对不同事件做不同处理.一个简单的用法可以像下面这样:</p>
<ul>
<li>让您的类继承 <code>sdkbox::ReviewListener</code></li>
</ul>
<pre><code class="cpp">#include &quot;PluginReview/PluginReview.h&quot;
class MyClass : public sdkbox::ReviewListener
{
private:
    void didDisplayAlert();
    void didDeclineToRate();
    void didToRate();
    void didToRemindLater();
};
</code></pre>

<ul>
<li>使用 <strong>listener</strong> 来监听事件:</li>
</ul>
<pre><code class="cpp">sdkbox::PluginReview::setListener(this);
</code></pre>

<h2 id="api-reference">API Reference</h2>
<h3 id="methods">Methods</h3>
<pre><code class="cpp">static bool init();
</code></pre>

<blockquote>
<p>initialize the plugin instance.</p>
</blockquote>
<pre><code class="cpp">static void setListener(ReviewListener* listener);
</code></pre>

<blockquote>
<p>Set listener to listen for adcolony events</p>
</blockquote>
<pre><code class="cpp">static ReviewListener* getListener();
</code></pre>

<blockquote>
<p>Get the listener</p>
</blockquote>
<pre><code class="cpp">static void removeListener();
</code></pre>

<blockquote>
<p>Remove the listener, and can't listen to events anymore</p>
</blockquote>
<pre><code class="cpp">static void tryToShowPrompt();
</code></pre>

<blockquote>
<p>Tells PluginReview to try and show the prompt (a rating alert). The prompt will be showed
  if there is connection available, the user hasn't declined to rate
  or hasn't rated current version.
  if the item <code>tryPromptWhenInit</code> in sdkbox.config is false, you can call this try to show prompt</p>
</blockquote>
<pre><code class="cpp">static void forceToShowPrompt(bool displayRateLaterButton = true);
</code></pre>

<blockquote>
<p>Tells PluginReview to show the prompt (a rating alert).
  Similar to tryToShowPrompt, but without checks (the prompt is always displayed).
  Passing false will hide the rate later button on the prompt.</p>
</blockquote>
<p>The case where you should call this is if your app has an
  explicit "Rate this app" command somewhere. This is similar to rateApp,
  but instead of jumping to the review directly, an intermediary prompt is displayed.</p>
<p>another case is for debug</p>
<pre><code class="cpp">static void userDidSignificantEvent(bool canPromptForRating);
</code></pre>

<blockquote>
<p>Tells PluginReview that the user performed a significant event. A significant
  event is whatever you want it to be. If you're app is used to make VoIP
  calls, then you might want to call this method whenever the user places
  a call. If it's a game, you might want to call this whenever the user
  beats a level boss.</p>
</blockquote>
<p>If the user has performed enough significant events and used the app enough,
  you can suppress the rating alert by passing NO for canPromptForRating. The
  rating alert will simply be postponed until it is called again with YES for
  canPromptForRating. The rating alert can also be triggered by appLaunched:
  and appEnteredForeground: (as long as you pass YES for canPromptForRating
  in those methods).</p>
<pre><code class="cpp">static void setCustomPromptTitle(const std::string&amp; title);
</code></pre>

<blockquote>
<p>Set customized title for alert view.</p>
</blockquote>
<pre><code class="cpp">static void setCustomPromptMessage(const std::string&amp; message);
</code></pre>

<blockquote>
<p>Set customized message for alert view.</p>
</blockquote>
<pre><code class="cpp">static void setCustomPromptCancelButtonTitle(const std::string&amp; cancelTitle);
</code></pre>

<blockquote>
<p>Set customized cancel button title for alert view.</p>
</blockquote>
<pre><code class="cpp">static void setCustomPromptRateButtonTitle(const std::string&amp; rateTitle);
</code></pre>

<blockquote>
<p>Set customized rate button title for alert view.</p>
</blockquote>
<pre><code class="cpp">static void setCustomPromptRateLaterButtonTitle(const std::string&amp; rateLaterTitle);
</code></pre>

<blockquote>
<p>Set customized rate later button title for alert view.</p>
</blockquote>
<h3 id="listeners">Listeners</h3>
<pre><code class="cpp">void didDisplayAlert();
</code></pre>

<blockquote>
<p>trigger when rate prompt display</p>
</blockquote>
<pre><code class="cpp">void didDeclineToRate();
</code></pre>

<blockquote>
<p>trigger when user refuse to rate</p>
</blockquote>
<pre><code class="cpp">void didToRate();
</code></pre>

<blockquote>
<p>trigger when user want to rate</p>
</blockquote>
<pre><code class="cpp">void didToRemindLater();
</code></pre>

<blockquote>
<p>trigger when user want to remind later</p>
</blockquote>
<h2 id="_6">手动集成</h2>
<p>如果 <em>SDKBOX 安装器</em> 安装插件失败了，那么需要手动集成插件.如果安装器安装插件成功了,那么不需要，也没必要,按文档再手动集成一次.</p>
<p>下面列出的的步骤一般很少用到.如果你按下面的步骤完成了集成，请在完成集成后，再按步骤检查一次.</p>
<h2 id="ios">iOS 手动集成步骤</h2>
<p>把 <strong>plugins/ios</strong> 里的如下的 framework 拖到您的 Xcode 工程里的 <code>Review</code> 项,添加时,把 <code>Copy items if needed</code> 勾选上:</p>
<blockquote>
<p>sdkbox.framework</p>
<p>PluginReview.framework</p>
<p>plugin_review_res_bundle</p>
</blockquote>
<h2 id="android">Android 手动集成步骤.</h2>
<h3 id="_7">拷贝文件</h3>
<p>从安装包中的 <code>plugin/android/libs</code> 文件夹下拷贝下面的 <strong>jar</strong> 文件到您的工程中的 <strong>proj.android/libs</strong> 文件夹.</p>
<blockquote>
<p>ReviewLite.jar</p>
<p>PluginReview.jar</p>
<p>sdkbox.jar</p>
</blockquote>
<p>从 <code>plugin/android/jni</code> 拷贝 <code>pluginreview</code> 和 <code>sdkbox</code> 目录到您的工程的 <code>proj.android/jni/</code> 目录.如果 <code>sdkbox</code> 目录已存在，覆盖它.</p>
<p>从 <code>plugin/android</code> 拷贝 <code>plugin_review_res_project</code> 到您工程中的 <code>proj.android</code>,同时让您的工程引用到 <code>plugin_review_res_project</code> 这个工程</p>
<h3 id="androidmanifestxml">编辑 <code>AndroidManifest.xml</code></h3>
<p>在 <strong>application tag</strong> 这个项前面添加如下权限:</p>
<pre><code class="xml">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;
</code></pre>

<h3 id="androidmk">编辑 <code>Android.mk</code></h3>
<p>在 <code>proj.android/jni/Android.mk</code> 中:</p>
<p>给 <strong>LOCAL_STATIC_LIBRARIES</strong> 添加如下要求:</p>
<pre><code>LOCAL_STATIC_LIBRARIES += android_native_app_glue
LOCAL_LDLIBS += -landroid
LOCAL_LDLIBS += -llog
LOCAL_STATIC_LIBRARIES += PluginReview
LOCAL_STATIC_LIBRARIES += sdkbox
</code></pre>

<p>在所有的 <strong>import-module</strong> 项前，添加如下调用:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
</code></pre>

<p>在所有的 <strong>import-module</strong> 后，新增如下项:</p>
<pre><code>$(call import-module, ./sdkbox)
$(call import-module, ./pluginreview)
</code></pre>

<p>修改后，应该和下面的修改类似:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
$(call import-module, ./sdkbox)
$(call import-module, ./pluginreview)
</code></pre>

<h3 id="aplicationmk">编辑 <code>Aplication.mk</code></h3>
<p>在 <code>proj.android/jni/Application.mk</code> 中:</p>
<p>添加 <strong>APP_PATFORM</strong> 的版本要求:</p>
<pre><code>APP_PLATFORM := android-9
</code></pre>

<h3 id="yourgamenamejava">修改 <code>&lt;YourGameName&gt;.java</code></h3>
<ul>
<li>修改 <code>proj.android/src/&lt;package identifier&gt;/&lt;YourGameName&gt;.java</code> 文件，导入如下包：</li>
</ul>
<pre><code class="java">import android.content.Intent;
import com.sdkbox.plugin.SDKBox;
</code></pre>

<ul>
<li>然后，修改您的类 <code>onCreate(final Bundle savedInstanceState)</code> 函数，添加一个调用语句 <code>SDKBox.init(this)</code> 。如下：</li>
</ul>
<pre><code class="java">protected void onCreate(Bundle savedInstanceState){
  super.onCreate(savedInstanceState);
  SDKBox.init(this);
}
</code></pre>

<ul>
<li>
<p>最后, 我需要提供合适的 <strong>overrides</strong> 方法的代码。这里有一些约定如下。</p>
<ul>
<li>
<p>如果这个被列出的方法没有在 <code>SDKBox</code> 中定义，那么<strong>定义它</strong>。</p>
</li>
<li>
<p>如果这个被列出的方法已经被定义在 <code>SDKBox</code> 中，那么请调用这个在 <code>SDKBox</code> 中的<strong>同名方法</strong>。</p>
</li>
</ul>
</li>
</ul>
<pre><code class="java">    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
          if(!SDKBox.onActivityResult(requestCode, resultCode, data)) {
            super.onActivityResult(requestCode, resultCode, data);
          }
    }
    @Override
    protected void onStart() {
          super.onStart();
          SDKBox.onStart();
    }
    @Override
    protected void onStop() {
          super.onStop();
          SDKBox.onStop();
    }
    @Override
    protected void onResume() {
          super.onResume();
          SDKBox.onResume();
    }
    @Override
    protected void onPause() {
          super.onPause();
          SDKBox.onPause();
    }
    @Override
    public void onBackPressed() {
          if(!SDKBox.onBackPressed()) {
            super.onBackPressed();
          }
    }
</code></pre>

<h3 id="release">混淆 (release 模式有效, 可选)</h3>
<ul>
<li>编辑 <code>project.properties</code> 指定一个 <code>Proguard</code> 配制文件. 例如:</li>
</ul>
<pre><code>proguard.config=proguard.cfg
</code></pre>

<ul>
<li>编辑这个文件,包含如下内容:</li>
</ul>
<pre><code># If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}
</code></pre>

<p><strong>注意:</strong> 混淆只在 <strong>Release</strong> 模式下有效 (例如 <code>cocos run -m release</code>) ,在 debug 模式下不会调用混淆配置文件.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script src="../../../js/base.js"></script>


    </body>
</html>
